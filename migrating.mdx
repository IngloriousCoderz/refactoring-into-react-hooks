import LiveCode from './components/live-code'

<LiveCode title="State" code={require('!raw-loader!./components/state')} />

```notes
function MyComponent() {
  const [text, setText] = useState('Hello world!')
  const handleChange = event => setText(event.target.value)
  return (
    <>
      <input value={text} onChange={handleChange} />
      <p>{text}</p>
    </>
  )
}
```

---

<LiveCode title="Refs" code={require('!raw-loader!./components/refs')} />

```notes
function MyComponent() {
  const myRef = useRef()
  const handleClick = () => myRef.current.focus()
  return (
    <>
      <button onClick={handleClick}>Focus!</button>
      <input defaultValue="Hello world!" ref={myRef} />
    </>
  )
}
```

---

<LiveCode
  title="Lifecycle"
  code={require('!raw-loader!./components/lifecycle')}
/>

```notes
function MyComponent() {
  const { count, toggle } = useTimer()

  return (
    <>
      <p>{count}</p>
      <button onClick={toggle}>Play/Pause</button>
    </>
  )
}

function useTimer() {
  const [count, setCount] = useState(0)
  const [play, setPlay] = useState(false)

  function toggle() {
    setPlay(!play)
  }

  useEffect(() => {
    let interval = null

    function start() {
      interval = setInterval(() => setCount(count => count + 1), 1000)
    }

    function stop() {
      clearInterval(interval)
    }

    if (play) {
      start()
    } else {
      stop()
    }

    return () => stop()
  }, [play])

  return { count, toggle }
}
```

---

<LiveCode title="HoCs" code={require('!raw-loader!./components/hocs')} />

```notes
const MyComponent = React.memo(function MyComponent() {
  const text = useText()
  return (
    <>
      <input {...text} />
      <p>{text.value}</p>
    </>
  )
})

function useText() {
  const [text, setText] = useState('Hello world!')
  const handleChange = event => setText(event.target.value)
  return { value: text, onChange: handleChange }
}
```

---

<LiveCode title="Context" code={require('!raw-loader!./components/context')} />

```notes
function Child() {
  const theme = useContext(ThemeContext)
  const title = useContext(TitleContext)
  return <p style={{ background: theme }}>{title}</p>
}
```

---

<LiveCode
  title="Reducers"
  code={require('!raw-loader!./components/reducers')}
/>

```notes
function Counter() {
  const { count, decrement, handleChange, increment } = useCounter()
  return (
    <>
      <p>{count}</p>
      <button onClick={decrement}>-1</button>
      <input type="number" value={count} onChange={handleChange} />
      <button onClick={increment}>+1</button>
    </>
  )
}

function useCounter() {
  const [count, dispatch] = useReducer(counter, 0)
  const decrement = step => dispatch({ type: 'DECREMENT', payload: step })
  const setValue = value => dispatch({ type: 'SET_VALUE', payload: value })
  const increment = step => dispatch({ type: 'INCREMENT', payload: step })

  const handleChange = event => setValue(parseInt(event.target.value))

  return { count, decrement, handleChange, increment }
}
```

---

<LiveCode title="Redux" code={require('!raw-loader!./components/redux')} />

```notes
function useCounter() {
  const [count, dispatch] = useReducer(counter, 0)
  const decrement = step => dispatch({ type: 'DECREMENT', payload: step })
  const setValue = value => dispatch({ type: 'SET_VALUE', payload: value })
  const increment = step => dispatch({ type: 'INCREMENT', payload: step })

  const handleChange = event => setValue(parseInt(event.target.value))

  return { count, decrement, handleChange, increment }
}

function Parent() {
  const counter = useCounter()

  return (
    <CounterContext.Provider value={counter}>
      <Child />
    </CounterContext.Provider>
  )
}
```
