import { Head } from 'mdx-deck'

import Header from './components/header'
import Video from './components/video'
import Image from './components/image'
import LiveCode from './components/live-code'

import theme from './theme'
export { default as theme } from './theme'

<Head>
  <title>Refactoring Into React Hooks</title>
</Head>

# Refactoring Into React Hooks

<Image
  src={`./assets/images/ic_${theme.name}.png`}
  width="8rem"
  height="8rem"
/>

[Matteo Antony Mistretta](https://www.linkedin.com/in/antonymistretta/)

[Inglorious Coderz](https://www.ingloriouscoderz.it)

[@antonymistretta](https://twitter.com/antonymistretta)

<Header />

---

## Why

- They [separate](https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889) stateful logic
- They are [composable](https://reactjs.org/docs/hooks-custom.html) functions
- They keep our component hierarchy [flat](https://itnext.io/why-reacts-hooks-api-is-a-game-changer-8731c2b0a8c)
- They allow us to go fully [functional](https://hackernoon.com/react-stateless-functional-components-nine-wins-you-might-have-overlooked-997b0d933dbc)
- They are now [stable](https://reactjs.org/blog/2019/02/06/react-v16.8.0.html)

---

## Separation Of Concerns

<Video
  poster="https://pbs.twimg.com/tweet_video_thumb/DqsCilOU0AAoS7P.jpg"
  src="https://video.twimg.com/tweet_video/DqsCilOU0AAoS7P.mp4"
/>

[Pavel Prichodko's tweet](https://twitter.com/prchdk/status/1056960391543062528)

---

<div style={{ display: 'flex', alignItems: 'center' }}>
  <pre className="language-bash">antony@ingloriouscoderz ~> whoami</pre>
  <Image src="./assets/images/mobile-website-mockup.png" height="100vh" />
</div>

---

<Image
  src="./assets/images/refactor-all-the-things.jpeg"
  transform="rotate(-10deg)"
/>

---

## Let's refactor...

1. [_State_](#6)
2. Refs and Instance Attributes
3. Lifecycle Methods
4. Higher-Order Components
5. Render Props
6. Context API
7. Reducers
8. Redux

---

<LiveCode
  title="State - Before"
  code={require('!raw-loader!./live-coding/state/before')}
/>

---

<LiveCode
  title="State - After"
  code={require('!raw-loader!./live-coding/state/after')}
/>

---

## Let's refactor...

1. State
2. [_Refs and Instance Attributes_](#9)
3. Lifecycle Methods
4. Higher-Order Components
5. Render Props
6. Context API
7. Reducers
8. Redux

---

<LiveCode
  title="Refs - Before"
  code={require('!raw-loader!./live-coding/refs/before')}
/>

---

<LiveCode
  title="Refs - After"
  code={require('!raw-loader!./live-coding/refs/after')}
/>

---

## Let's refactor...

1. State
2. Refs and Instance Attributes
3. [_Lifecycle Methods_](#12)
4. Higher-Order Components
5. Render Props
6. Context API
7. Reducers
8. Redux

---

<LiveCode
  title="Lifecycle - Before"
  code={require('!raw-loader!./live-coding/lifecycle/before')}
/>

---

<LiveCode
  title="Lifecycle - After"
  code={require('!raw-loader!./live-coding/lifecycle/after')}
/>

---

## Let's refactor...

1. State
2. Refs and Instance Attributes
3. Lifecycle Methods
4. [_Higher-Order Components_](#15)
5. Render Props
6. Context API
7. Reducers
8. Redux

```notes
So far we saw how React hooks allow us to get rid of class components in favor of simple and composable functions. But, if you're like me (or you attended my previous talk titled "React, The Inglorious Way"), you've already looked for some way to achieve the same result before, maybe through higher-order components, and maybe you even stumbled upon Recompose.

Recompose, for those who don't know, is a collection of higher-order components, and a function that composes them together, created by Andrew Clarke, which is the co-creator of Redux together with Dan Abramov. Recompose already does a great job in composing reusable functions, the only problem with higher-order components is that they create a deeply nested component hierarchy which is difficult to debug.
```

---

<Image src="./assets/images/hooks-vs-recompose.png" width="33vw" />

```notes
That's why last year in November, while still studying hooks, I publicly asked myself: "React hooks leave me a bit puzzled still... Isn't it cleaner to just use Recompose? Maybe with some hierarchy-cutting magic...".

Apart from the overwhelming number of likes on my post, another result I obtained is that THE Dan Abramov himself replied to me. Yay, senpai noticed me! <3 He said: "I think Andrew is writing something to explain why not". "Cool, can't wait to read it!".
```

---

<Image src="./assets/images/waiting.jpg" width="33vw" />

```notes
That was November. I surfed every other day on the internet looking for Andrew's article, but never saw one.
```

---

<Image src="./assets/images/andrew-on-recompose.png" height="33vh" />
<Image src="./assets/images/dan-on-recompose.png" height="50vh" />

```notes
One thing I found, though, is this excerpt from Recompose's README file, written at the end of October. Here Andrew says that "hooks solve all problems" addressed with Recompose, so he's "discontinuing active maintenance", he's not going to maintain the library anymore.

This of course triggered a rage, which was calmed down by Dan a few weeks later: Recompose had no new features for two years already, so dicontinuing it won't change anything for the users. But another interesting part is that he says that hooks solve "a large subset" of problems, not all of them. We will see what this means in a while.

Anyway, since we still hadn't a satisfying reply from the React team, let's find out by ourselves what does it mean to refactor from Recompose and higher-order components to hooks.
```

---

<LiveCode
  title="HoCs - Before"
  code={require('!raw-loader!./live-coding/hocs/before')}
/>

---

<LiveCode
  title="HOCs - After"
  code={require('!raw-loader!./live-coding/hocs/after')}
/>

---

## Let's refactor...

1. State
2. Refs and Instance Attributes
3. Lifecycle Methods
4. Higher-Order Components
5. [_Render Props_](#21)
6. Context API
7. Reducers
8. Redux

---

<LiveCode
  title="Render Props - Before"
  code={require('!raw-loader!./live-coding/render-props/before')}
/>

---

<LiveCode
  title="Render Props - After"
  code={require('!raw-loader!./live-coding/render-props/after')}
/>

---

## Let's refactor...

1. State
2. Refs and Instance Attributes
3. Lifecycle Methods
4. Higher-Order Components
5. Render Props
6. [_Context API_](#24)
7. Reducers
8. Redux

---

<LiveCode
  title="Context - Before"
  code={require('!raw-loader!./live-coding/context/before')}
/>

---

<LiveCode
  title="Context  - After"
  code={require('!raw-loader!./live-coding/context/after')}
/>

---

## Let's refactor...

1. State
2. Refs and Instance Attributes
3. Lifecycle Methods
4. Higher-Order Components
5. Render Props
6. Context API
7. [_Reducers_](#27)
8. Redux

---

<LiveCode
  title="Reducers - Before"
  code={require('!raw-loader!./live-coding/reducers/before')}
/>

---

<LiveCode
  title="Reducers - After"
  code={require('!raw-loader!./live-coding/reducers/after')}
/>

---

## Let's refactor...

1. State
2. Refs and Instance Attributes
3. Lifecycle Methods
4. Higher-Order Components
5. Render Props
6. Context API
7. Reducers
8. [_Redux_](#30)

---

<LiveCode
  title="Redux - Before"
  code={require('!raw-loader!./live-coding/redux/before')}
/>

---

<LiveCode
  title="Redux - After"
  code={require('!raw-loader!./live-coding/redux/after')}
/>

---

## Hooks:

- Simplify and [organize](https://github.com/rehooks/awesome-react-hooks) code
- Are [composable](https://reactjs.org/docs/hooks-custom.html)
- Will give [performance](https://blog.kentcdodds.com/react-hooks-whats-going-to-happen-to-render-props-8ade1f00f159) gains
- Are subject to [rules](https://reactjs.org/docs/hooks-rules.html)
- Are still completely [optional](https://reactjs.org/docs/hooks-intro.html#gradual-adoption-strategy)
- Will [not](https://blog.kentcdodds.com/react-hooks-whats-going-to-happen-to-render-props-8ade1f00f159) replace everything else

---

# Thank you.

Questions?

[html](https://www.ingloriouscoderz.it/refactoring-into-react-hooks)
|
[pdf](https://www.ingloriouscoderz.it/refactoring-into-react-hooks/presentation.pdf)
|
[source](https://github.com/IngloriousCoderz/refactoring-into-react-hooks)
